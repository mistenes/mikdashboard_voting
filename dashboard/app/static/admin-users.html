<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MIK Tagszervezeti Platform – Felhasználók és regisztrációk</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body class="simple-bg" data-admin-page="users">
    <div class="admin-shell">
      <aside class="admin-sidebar">
        <div class="sidebar-brand">
          <h1>MIK Tagszervezeti Platform</h1>
          <p>Admin vezérlőpult</p>
        </div>
        <nav class="sidebar-nav" aria-label="Admin menü">
          <a href="/admin" class="sidebar-link">Áttekintés</a>
          <a href="/admin/szervezetek" class="sidebar-link">Szervezetek</a>
          <a href="/admin/esemenyek" class="sidebar-link">Szavazási események</a>
          <a href="/admin/felhasznalok" class="sidebar-link active">Felhasználók és regisztrációk</a>
          <span class="sidebar-divider" aria-hidden="true"></span>
          <a href="/profil" class="sidebar-link">Profil</a>
          <span class="sidebar-link placeholder" aria-disabled="true">Riportok (hamarosan)</span>
          <a href="/admin/beallitasok" class="sidebar-link">Beállítások</a>
        </nav>
        <div class="sidebar-footer">
          <button id="admin-sign-out" type="button" class="ghost-btn sidebar-logout">
            Kijelentkezés
          </button>
        </div>
      </aside>
      <main class="admin-container">
        <header class="admin-header">
          <div>
            <h1>Felhasználók és regisztrációk</h1>
            <p class="lead">
              Hagyd jóvá a beérkező kérelmeket és hozd létre az új adminisztrátori fiókokat egy helyen.
            </p>
          </div>
          <div class="admin-actions">
            <button type="button" class="ghost-btn" data-pending-refresh>
              Függő regisztrációk frissítése
            </button>
          </div>
        </header>
        <p id="admin-status" class="status" role="status"></p>

        <section
          class="auth-card"
          id="pending-registrations"
          aria-labelledby="pending-table-title"
          data-pending-section
        >
          <div class="section-header">
            <div>
              <h2 id="pending-table-title">Függő regisztrációk</h2>
              <p class="muted">
                Hagyd jóvá vagy utasítsd el a beérkezett kérelmeket. A jóváhagyás automatikusan megerősíti az e-mail címet is.
              </p>
            </div>
          </div>
          <div class="table-wrapper">
            <table id="pending-table">
              <thead>
                <tr>
                  <th>Név</th>
                  <th>E-mail</th>
                  <th>E-mail státusz</th>
                  <th>Szervezet</th>
                  <th>Műveletek</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section class="auth-card" aria-labelledby="create-admin-title">
          <div class="section-header">
            <h2 id="create-admin-title">Új adminisztrátor létrehozása</h2>
            <p class="muted">
              Az itt létrehozott felhasználók azonnal adminisztrátori jogosultságot kapnak, és az első belépéskor jelszócserére lesz szükségük.
            </p>
          </div>
          <form id="create-admin-form" class="form-grid admin-user-form" autocomplete="off">
            <div class="form-field">
              <label for="admin-first-name">Keresztnév</label>
              <input id="admin-first-name" name="first_name" type="text" required maxlength="100" />
            </div>
            <div class="form-field">
              <label for="admin-last-name">Vezetéknév</label>
              <input id="admin-last-name" name="last_name" type="text" required maxlength="100" />
            </div>
            <div class="form-field">
              <label for="admin-email">E-mail cím</label>
              <input id="admin-email" name="email" type="email" required maxlength="255" />
            </div>
            <div class="form-actions">
              <button type="submit" class="primary-btn">Admin létrehozása</button>
            </div>
          </form>
          <p class="muted">
            A rendszer automatikusan generál egy ideiglenes jelszót, és e-mailben elküldi az új adminisztrátornak. A jelszót a mentés után
            itt is megjelenítjük, így szükség esetén manuálisan is továbbíthatod.
          </p>
        </section>

        <section class="auth-card" aria-labelledby="admin-list-title">
          <div class="section-header">
            <h2 id="admin-list-title">Adminisztrátorok</h2>
            <p class="muted">
              Jelenleg <span data-admin-count>0</span> aktív adminisztrátori fiók van a rendszerben.
            </p>
          </div>
          <div class="table-scroll" data-admin-table>
            <table class="admin-user-table" aria-describedby="admin-list-title">
              <thead>
                <tr>
                  <th scope="col">Név</th>
                  <th scope="col">E-mail</th>
                  <th scope="col">Létrehozva</th>
                  <th scope="col">Állapot</th>
                  <th scope="col" class="actions-column">Műveletek</th>
                </tr>
              </thead>
              <tbody data-admin-list></tbody>
            </table>
          </div>
          <p class="muted" data-admin-empty hidden>
            Jelenleg nincs adminisztrátori fiók. Hozz létre egyet a fenti űrlappal.
          </p>
          <p class="muted">
            A táblázatból újraküldheted a meghívó e-mailt az ideiglenes jelszóval, vagy eltávolíthatod az adminisztrátort a rendszerből.
          </p>
        </section>
      </main>
    </div>
    <script type="module" src="/static/admin.js"></script>
  </body>
</html>
